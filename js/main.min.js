!function(){const e=document;function t(t){const n=e.querySelector(t);if(!n)return;const o=n.getBoundingClientRect().top+window.scrollY-80;window.scrollTo({top:o,behavior:"smooth"})}function n(){const t=e.getElementById("backToTopBtn");t&&(window.addEventListener("scroll",(()=>{window.scrollY>300?t.classList.add("show"):t.classList.remove("show")})),t.addEventListener("click",(()=>window.scrollTo({top:0,behavior:"smooth"}))))}function o(){const t=e.getElementById("scrollProgressBar");t&&window.addEventListener("scroll",(()=>{const n=e.documentElement.scrollHeight-window.innerHeight,o=n>0?window.scrollY/n*100:0;t.style.width=o+"%"}))}function a(){const t=Array.from(e.querySelectorAll(".fun-counter"));if(!t.length)return;let n=!1;const o=e.querySelector("#home")||e.body,a=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&function(){if(n)return;n=!0,t.forEach((e=>{const t=Number(e.getAttribute("data-target"))||0,n=1200,o=performance.now();!function a(i){const r=Math.min(1,(i-o)/n);e.textContent=Math.floor(r*t).toString(),r<1&&requestAnimationFrame(a)}(o)}))}()}))}),{threshold:.2});a.observe(o)}function i(){window.addEventListener("load",(()=>{e.querySelectorAll(".shimmer-on-load").forEach((e=>{e.classList.add("shimmer-on-load-loaded")}))}))}function r(){const t=e.getElementById("galleryLightbox");if(!t)return;const n=e.getElementById("galleryLightboxImage"),o=e.getElementById("galleryLightboxCaption"),a=new bootstrap.Modal(t);e.querySelectorAll(".gallery-item-btn").forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-gallery-src"),i=e.getAttribute("data-gallery-alt")||"";n.src=t||"",n.alt=i,o.textContent=i,a.show()}))}))}function s(){const t=e.getElementById("contactForm");if(!t)return;const n=e.getElementById("contactStatus"),o=e.getElementById("contactSubmitBtn");function a(e,t){n&&(n.textContent=e,n.className="mt-2 small text-"+(t||"muted"))}t.addEventListener("submit",(i=>{i.preventDefault();const r=new FormData(t),s=r.get("name")||"",c=r.get("email")||"",l=r.get("message")||"";let d=!0;s.toString().trim()?(t.name.classList.remove("is-invalid")):(t.name.classList.add("is-invalid"),d=!1);const u=/[^\s@]+@[^\s@]+\.[^\s@]+/.test(c.toString().trim());u?t.email.classList.remove("is-invalid"):(t.email.classList.add("is-invalid"),d=!1);l.toString().trim()?(t.message.classList.remove("is-invalid")):(t.message.classList.add("is-invalid"),d=!1),d||(a("Please correct the highlighted fields.","danger"),0);const m="https://formspree.io/f/your-form-id";a("Sending message…","muted"),o&&(o.disabled=!0),fetch(m,{method:"POST",headers:{Accept:"application/json"},body:r}).then((e=>{e.ok?(t.reset(),a("Thank you! Your message has been sent.","success")):a("There was a problem sending your message. You can also email directly.","danger")})).catch((()=>{a("Network error – please try again or email directly.","danger")})).finally((()=>{o&&(o.disabled=!1)}))}))}function c(){const t=Array.from(e.querySelectorAll('header .nav-link[href^="#"]'));if(!t.length)return;const n=t.map((t=>({link:t,section:e.querySelector(t.getAttribute("href"))}))).filter((e=>e.section));window.addEventListener("scroll",(()=>{const e=window.scrollY+120;let o=null;n.forEach((({section:t,link:n})=>{t.offsetTop<=e&&(o=n)})),t.forEach((e=>e.classList.remove("active"))),o&&o.classList.add("active")}))}function l(){["downloadResumeBtn","downloadResumeBtnHero","downloadResumeBtnSection"].forEach((t=>{const n=e.getElementById(t);n&&n.addEventListener("click",(()=>{window.generateResumePdf?window.generateResumePdf():window.print()}))})),["downloadJpsmCaseStudyBtn","downloadJpsmCaseStudyBtnProjects"].forEach((t=>{const n=e.getElementById(t);n&&n.addEventListener("click",(()=>{window.generateJpsmCaseStudyPdf?window.generateJpsmCaseStudyPdf():window.print()}))}))}e.addEventListener("DOMContentLoaded",(()=>{e.querySelectorAll('[data-scroll]').forEach((n=>{n.addEventListener("click",(n=>{const o=n.currentTarget.getAttribute("href");o&&o.startsWith("#")&&(n.preventDefault(),t(o))}))})),n(),(()=>{const t=e.querySelectorAll("#currentYear"),n=String((new Date).getFullYear());t.forEach((e=>e.textContent=n))})(),o(),a(),i(),r(),s(),c(),l()}))}();
